<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">

<ui:composition template="templates/main.xhtml">
	<ui:define name="content">
		<div class="row">
			<div class="col-xs-12">
				<h1 class="page-header">
					<i class="fa fa-search"></i> Find your trips
				</h1>
			</div>
		</div>
		<div class="row">
			<h:form>
				<div class="col-xs-3 form-group">
					<label for="departureCity" class="control-label">From</label>
					<h:inputText value="#{findTripsController.departureCity}" styleClass="form-control"></h:inputText>
				</div>
				<div class="col-xs-3 form-group">
					<label for="arrivalCity" class="control-label">To</label>
					<h:inputText value="#{findTripsController.arrivalCity}" styleClass="form-control" />
				</div>
				<div class="col-xs-3 form-group">
					<label for="departureDate" class="control-label">Date</label>
					<h:inputText id="date" value="#{findTripsController.departureDate}"
						styleClass="form-control" converterMessage="Bad format date (dd/mm/yyyy)">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:inputText>
					<h:message for="date" styleClass="text-danger"/>
				</div>
				<div class="col-xs-3 form-group">
					<label></label>
					<h:commandLink styleClass="btn btn-primary btn-block search-btn" action="#{findTripsController.findTrips}">
						<i class="fa fa-search"></i> Find
					</h:commandLink>
				</div>
			</h:form>
		</div>
		<div class="row">
			<div class="col-xs-12">
				<h3>
					<h:outputText escape="false" value="#{findTripsController.searchMessage}" rendered="#{empty findTripsController.trips}"></h:outputText>
				</h3>
				
				<h:dataTable var="trip" value="#{findTripsController.trips}" class="table table-striped" rendered="#{not empty findTripsController.trips}">
					<h:column>
						<!-- Column header -->
						<f:facet name="header">
							<div class="text-center">
								<h:outputText value="From"></h:outputText>
							</div>
						</f:facet>
						<!-- row record  -->
						<div class="text-center">
							<h:outputText value="#{trip.departureCity}"/>
						</div>
					</h:column>
					<h:column>
						<!-- Column header -->
						<f:facet name="header">
							<div class="text-center">
								<h:outputText value="To"/>
							</div>
						</f:facet>
						<!-- row record  -->
						<div class="text-center">
							<h:outputText value="#{trip.arrivalCity}"/>
						</div>
					</h:column>
					<h:column>
						<!-- Column header -->
						<f:facet name="header">
							<div class="text-center">
								<h:outputText value="Date"/>
							</div>
						</f:facet>
						<!-- row record  -->
						<div class="text-center">
							<h:outputText value="#{trip.departureDate}">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</h:outputText>
						</div>
					</h:column>
					<h:column>
						<!-- Column header -->
						<f:facet name="header">
							<div class="text-center">
								<h:outputText value="Available seats"/>
							</div>
						</f:facet>
						<!-- row record  -->
						<div class="text-center">
							<h:outputText value="#{trip.availableSeats}"/>
						</div>
					</h:column>
					<h:column>
						<!-- Column header -->
						<f:facet name="header">
							<div class="text-center">
								<h:outputText value="Price"/>
							</div>
						</f:facet>
						<!-- row record  -->
						<div class="text-center">
							<h:outputText value="#{trip.price} â‚¬"/>
						</div>
					</h:column>
					<h:column>
						<!-- Column header -->
						<f:facet name="header">
							<div class="text-center">
								<h:outputText value="" />
							</div>
						</f:facet>
						<!-- row record  -->
						<div class="text-center">
							<h:outputLink value="showTripView.xhtml" styleClass="btn btn-info">
								<f:param name="tripId" value="#{trip.id}"/>
								<h:outputText value="Details"/>
							</h:outputLink>
						</div>
					</h:column>
				</h:dataTable>
			</div>
		</div>
	</ui:define>
</ui:composition>

</html>
